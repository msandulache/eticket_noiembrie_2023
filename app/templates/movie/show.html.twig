{% extends 'base.html.twig' %}

{% block title %}{{ movie.title }}{% endblock %}

{% block body %}

    <div class="mx-auto grid max-w-screen-lg justify-left px-4 mt-20">

        <!-- product-detail -->
        <div class="container grid grid-cols-3 gap-6">
            <div>
                <img src="https://image.tmdb.org/t/p/w500/{{ movie.posterPath }}" alt="product" class="w-full">
            </div>

            <div class="col-span-2">
                <h2 class="text-3xl font-medium uppercase mb-2">{{ movie.title }}</h2>
                <div class="flex items-center mb-4">
                    <div class="flex gap-1 text-sm text-yellow-400">
                        <span><i class="fa-solid fa-star"></i></span>
                        <span><i class="fa-solid fa-star"></i></span>
                        <span><i class="fa-solid fa-star"></i></span>
                        <span><i class="fa-solid fa-star"></i></span>
                        <span><i class="fa-solid fa-star"></i></span>
                    </div>
                    <div class="text-xs text-gray-500 ml-3">({{ movie.voteCount }} votes)</div>
                </div>
                <div class="space-y-2">
                    <p class="text-gray-800 font-semibold space-x-2">
                        <span>Release date: </span>
                        <span class="text-green-600">{{ movie.releaseDate | date('d.m.Y') }}</span>
                    </p>
                    <p class="space-x-1">
                        <span class="text-gray-800 font-semibold">Genres: </span>
                        {% for genre in genres %}
                            <span class="inline-flex items-center rounded-md bg-red-50 px-2 py-1 text-xs font-medium text-red-600 ring-1 ring-inset ring-red-600/10">{{ genre.name }}</span>
                            &nbsp;
                        {% endfor %}
                    </p>

                    <p class="space-x-1">
                        <span class="text-gray-800 font-semibold">Actors: </span>
                        {% for actor in cast %}
                            <span class="text-gray-600 text-sm italic">{{ actor }}{% if not loop.last %},{% endif %}</span>
                        {% endfor %}
                    </p>
                    <p class="space-x-2">
                        <span class="text-gray-800 font-semibold">SKU: </span>
                        <span class="text-gray-600">BE45VGRT</span>
                    </p>
                </div>
                <div class="flex items-baseline mb-1 space-x-2 font-roboto mt-4">
                    <p class="text-xl text-primary font-semibold">${{ movie.price }}</p>
                    <p class="text-base text-gray-400 line-through">$55.00</p>
                </div>

                <p class="mt-4 text-gray-600 leading-relaxed">{{ movie.overview }}</p>

                <div class="flex gap-3 mt-4">
                    <a target="_blank" href="https://www.facebook.com/{{ externalIds['facebook_id'] }}"
                       class="text-gray-400 hover:text-gray-500 h-8 w-8 rounded-full border border-gray-300 flex items-center justify-center">
                        <i class="fa-brands fa-facebook-f"></i>
                    </a>
                    <a target="_blank" href="https://twitter.com/{{ externalIds['twitter_id'] }}"
                       class="text-gray-400 hover:text-gray-500 h-8 w-8 rounded-full border border-gray-300 flex items-center justify-center">
                        <i class="fa-brands fa-twitter"></i>
                    </a>
                    <a target="_blank" href="https://www.instagram.com/{{ externalIds['instagram_id'] }}"
                       class="text-gray-400 hover:text-gray-500 h-8 w-8 rounded-full border border-gray-300 flex items-center justify-center">
                        <i class="fa-brands fa-instagram"></i>
                    </a>
                </div>


                <div class="mt-6 flex gap-3 border-b border-gray-200 pb-5 pt-5">
                    <a href="#"
                       class="bg-primary border border-primary text-white px-8 py-2 font-medium rounded uppercase flex items-center gap-2 hover:bg-transparent hover:text-primary transition">
                        <i class="fa-solid fa-ticket"></i> Choose tickets
                    </a>
                    <a href="#"
                       class="border border-gray-300 text-gray-600 px-8 py-2 font-medium rounded uppercase flex items-center gap-2 hover:text-primary transition">
                        <i class="fa-solid fa-heart"></i> Wishlist
                    </a>
                </div>
            </div>
        </div>

        <!-- videos -->
        <div class="container pb-16">
            <div class="mx-auto grid max-w-screen-lg justify-left px-4  ">
                <p class="mt-6 text-2xl font-semibold text-gray-800">Videos</p>
                <hr class="mt-2 mb-4 border-t border-gray-300">
                <div class="grid grid-cols-3 gap-6">
                    {% for video in videos %}
                        <iframe src="https://www.youtube.com/embed/{{ video }}" title="YouTube video player"
                                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                                allowfullscreen></iframe>
                    {% endfor %}
                </div>

            </div>

        </div>
        <!-- ./videos -->

        <!-- related product -->
        <div class="container pb-16">
            <div class="mx-auto grid max-w-screen-lg justify-left px-4  ">
                <p class="mt-12 text-2xl font-semibold text-gray-800">Recommended movies</p>
                <hr class="mt-2 mb-12 border-t border-gray-300">
            </div>
            <div class="grid grid-cols-4 gap-6">
                {% for movie in recommendedMovies %}
                    <article class="rounded-xl bg-white p-3 shadow-lg hover:shadow-xl">
                        <a href="/movie/{{ movie.id }}">
                            <div class="relative flex items-end overflow-hidden rounded-xl">
                                <img src="https://image.tmdb.org/t/p/w300/{{ movie.backdropPath }}" alt="Hotel Photo"/>
                                <div class="absolute bottom-3 left-3 inline-flex items-center rounded-lg bg-white p-2 shadow-md">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-secondary"
                                         viewBox="0 0 20 20"
                                         fill="currentColor">
                                        <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
                                    </svg>
                                    <span class="text-slate-400 ml-1 text-sm">{{ movie.voteAverage | number_format(1) }}</span>
                                </div>
                            </div>

                            <div class="mt-1 p-2">
                                <h2 class="text-slate-700">{{ movie.originalTitle }}</h2>
                                <p class="text-slate-400 mt-1 text-sm">Thriller, Drama</p>

                                <div class="flex items-center justify-between py-2">
                                    <p>
                                        <span class="text-xl font-bold text-primary">${{ movie.price }}</span>
                                    </p>
                                    <a href="#"
                                       class="bg-secondary flex items-center justify-center rounded-full px-5 py-1.5 text-center text-sm font-medium text-primary hover:bg-slate-200 hover:text-slate-700">
                                        View details</a>
                                </div>
                            </div>
                        </a>
                    </article>
                {% endfor %}
            </div>
        </div>
        <!-- ./related product -->
    </div>

{% endblock %}